import { Steps } from "nextra/components";

# React Context API
React Context API is a powerful feature that provides a way to share values like themes, user authentication status, or any global state across a React component tree. Let's dive into understanding and mastering the React Context API.

## Introduction to React Context API

The React Context API allows you to pass data through the component tree without having to pass props down manually at every level. It consists of two main components: Provider and Consumer.

### Creating a Context

```jsx
import React from "react";

// Create a new context with a default value
const MyContext = React.createContext("default value");

export default MyContext;
```

### Providing Context Value

Wrap your component tree with the Provider to make the context value available to all its descendants.

```jsx
import React from "react";
import MyContext from "./MyContext";

const App = () => {
  return (
    <MyContext.Provider value="Context Value">
      {/* Your component tree goes here */}
    </MyContext.Provider>
  );
};

export default App;
```

## Using Context in Components

### Using Context in Class Components

Access the context value using this.context in class components.

```jsx
import React, { Component } from "react";
import MyContext from "./MyContext";

class MyClassComponent extends Component {
  static contextType = MyContext;

  render() {
    const contextValue = this.context;
    return <p>{contextValue}</p>;
  }
}
```

### Using Context in Functional Components

Use the useContext hook to access context values in functional components.

```jsx
import React, { useContext } from "react";
import MyContext from "./MyContext";

const MyFunctionalComponent = () => {
  const contextValue = useContext(MyContext);
  return <p>{contextValue}</p>;
};
```

### Dynamic Context Values

Context values can be dynamic and updated using state or any other logic.

```jsx
import React, { useState } from "react";
import MyContext from "./MyContext";

const DynamicContextExample = () => {
  const [value, setValue] = useState("Initial Value");

  return (
    <MyContext.Provider value={{ value, setValue }}>
      {/* Components can access and update 'value' using context */}
    </MyContext.Provider>
  );
};
```

### Consuming Multiple Contexts:

You can consume multiple contexts in a component by nesting Consumer components or using multiple useContext hooks.

```jsx
import React, { useContext } from "react";
import ThemeContext from "./ThemeContext";
import UserContext from "./UserContext";

const ThemedUserComponent = () => {
  const theme = useContext(ThemeContext);
  const user = useContext(UserContext);

  return (
    <div style={{ color: theme }}>
      <p>User: {user.name}</p>
    </div>
  );
};
```

## Advanced Context Usage

<Steps>

### Context with Higher-Order Components

Wrap components with higher-order components to access context values.

```jsx
import React from "react";
import MyContext from "./MyContext";

const withMyContext = (Component) => {
  return (props) => (
    <MyContext.Consumer>
      {(contextValue) => <Component {...props} myContext={contextValue} />}
    </MyContext.Consumer>
  );
};

export default withMyContext;
```

### Context API and Reducers

Combine Context API with useReducer for complex state management.

```jsx
import React, { createContext, useReducer } from "react";

const initialState = { count: 0 };

const reducer = (state, action) => {
  switch (action.type) {
    case "increment":
      return { count: state.count + 1 };
    default:
      return state;
  }
};

const CounterContext = createContext();

const CounterProvider = ({ children }) => {
  const [state, dispatch] = useReducer(reducer, initialState);

  return (
    <CounterContext.Provider value={{ state, dispatch }}>
      {children}
    </CounterContext.Provider>
  );
};

export { CounterProvider, CounterContext };
```

</Steps>
By mastering the React Context API, you gain a powerful tool for managing global state in your React applications. Whether you're building simple themes or complex state logic, understanding and leveraging the Context API enhances your ability to create scalable and maintainable React applications.
