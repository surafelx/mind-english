
Executing Queries in JavaScript with Server-Side Databases
After establishing a connection to a database with Server-Side JavaScript (SSJS), the next crucial step is executing queries. Query execution allows you to interact with the database, retrieve data, insert new records, update existing information, and delete data. In this article, we'll focus on executing queries in JavaScript using Node.js and MongoDB as the database.

Prerequisites
Ensure you've completed the steps in the previous article to connect to your MongoDB database and have the required packages installed.

Executing Queries: Basic CRUD Operations
Reading Data (Retrieve)
Let's start by retrieving data from the database. Suppose we have a collection named users with documents representing users.

javascript
Copy code
// Retrieve all users
async function getAllUsers() {
  const db = await connectToDatabase();
  const usersCollection = db.collection('users');
  
  const allUsers = await usersCollection.find({}).toArray();
  console.log('All users:', allUsers);
}

// Retrieve a specific user by email
async function getUserByEmail(email) {
  const db = await connectToDatabase();
  const usersCollection = db.collection('users');
  
  const user = await usersCollection.findOne({ email });
  console.log('User by email:', user);
}

// Example usage
getAllUsers();
getUserByEmail('john@example.com');
Creating Data (Insert)
Now, let's explore creating data by inserting new records into the database.

javascript
Copy code
// Insert a new user
async function createUser(newUser) {
  const db = await connectToDatabase();
  const usersCollection = db.collection('users');
  
  const result = await usersCollection.insertOne(newUser);
  console.log(`Inserted ${result.insertedCount} document into the users collection`);
}

// Example usage
const newUserData = { name: 'Jane Doe', email: 'jane@example.com' };
createUser(newUserData);
Updating Data (Update)
Updating data is essential for maintaining accurate and up-to-date information in your database.

javascript
Copy code
// Update a user's email by name
async function updateEmailByName(name, newEmail) {
  const db = await connectToDatabase();
  const usersCollection = db.collection('users');
  
  const result = await usersCollection.updateOne({ name }, { $set: { email: newEmail } });
  console.log(`Matched ${result.matchedCount} document and modified ${result.modifiedCount} document`);
}

// Example usage
updateEmailByName('Jane Doe', 'jane.updated@example.com');
Deleting Data (Delete)
Lastly, let's explore deleting data by removing records from the database.

javascript
Copy code
// Delete a user by email
async function deleteUserByEmail(email) {
  const db = await connectToDatabase();
  const usersCollection = db.collection('users');
  
  const result = await usersCollection.deleteOne({ email });
  console.log(`Deleted ${result.deletedCount} document from the users collection`);
}

// Example usage
deleteUserByEmail('jane.updated@example.com');
Conclusion
Executing queries in JavaScript with Server-Side Databases involves performing basic CRUD operations: retrieving data, creating records, updating information, and deleting entries. Whether you're building a user management system or handling complex data structures, mastering query execution is fundamental. As you delve deeper into SSJS development, consider exploring advanced query techniques, such as aggregation pipelines, indexes, and transactions, to optimize and enhance your database interactions.





